# Linux 编辑器使用指南

如果你在服务器上遇到 `nano: command not found` 错误，请参考本指南。

## 快速解决方案

### 方案 1：安装 nano（推荐，最简单）

```bash
# Ubuntu/Debian 系统
sudo apt update
sudo apt install nano -y

# CentOS/RHEL 系统
sudo yum install nano -y

# 安装后即可使用
nano 文件名
```

### 方案 2：使用 vi/vim（系统通常自带）

大多数 Linux 系统都自带 `vi` 或 `vim` 编辑器。

```bash
# 使用 vi 编辑文件
vi 文件名
# 或
vim 文件名
```

## vi/vim 基本操作

### 进入编辑模式
1. 打开文件后，按 `i` 键进入插入模式（可以开始编辑）
2. 或者按 `a` 键在光标后插入

### 保存并退出
1. 按 `Esc` 键退出插入模式
2. 输入 `:wq` 然后按 `Enter`（保存并退出）
   - `:w` = 保存 (write)
   - `:q` = 退出 (quit)

### 不保存退出
1. 按 `Esc` 键退出插入模式
2. 输入 `:q!` 然后按 `Enter`（强制退出，不保存）

### 其他常用命令
- `:w` - 仅保存，不退出
- `:q` - 退出（如果有未保存的更改会提示）
- `dd` - 删除当前行（在普通模式下）
- `/关键词` - 搜索关键词，按 `n` 查找下一个
- `:set number` - 显示行号
- `:set nonumber` - 隐藏行号

### vi/vim 三种模式
1. **普通模式（Normal Mode）**：打开文件后的默认模式，用于导航和命令
2. **插入模式（Insert Mode）**：按 `i` 进入，可以编辑文本
3. **命令模式（Command Mode）**：按 `:` 进入，可以执行保存、退出等命令

## 方案 3：使用 cat 命令直接创建文件

对于简单的配置文件，可以使用 `cat` 命令：

```bash
# 创建新文件（会覆盖已存在的文件）
cat > 文件名 << 'EOF'
文件内容
可以多行
EOF

# 追加内容到文件
cat >> 文件名 << 'EOF'
追加的内容
EOF
```

示例：创建配置文件

```bash
cat > config.yml << 'EOF'
default:
  enabled_sources:
    - arxiv
    - crossref
  max_results: 50
EOF
```

## 方案 4：使用 echo 命令追加内容

```bash
# 创建单行文件
echo "内容" > 文件名

# 追加内容
echo "更多内容" >> 文件名
```

## 方案 5：在本地编辑后上传

如果服务器环境配置困难，可以：

1. 在本地 Windows 上使用文本编辑器（记事本、VS Code 等）编辑文件
2. 使用 SFTP 工具（如 FileZilla、WinSCP）上传到服务器
3. 或者使用 `scp` 命令：

```bash
# 从本地复制到服务器（在本地执行）
scp 本地文件路径 用户名@服务器IP:/服务器路径/

# 例如：
scp config.yml user@192.168.1.100:/opt/qk/
```

## 编辑器对比

| 编辑器 | 易用性 | 系统自带 | 推荐度 |
|--------|--------|----------|--------|
| nano | ⭐⭐⭐⭐⭐ 非常容易 | ❌ 需要安装 | ⭐⭐⭐⭐⭐ |
| vi/vim | ⭐⭐⭐ 需要学习 | ✅ 通常自带 | ⭐⭐⭐⭐ |
| cat | ⭐⭐ 适合简单文件 | ✅ 通常自带 | ⭐⭐⭐ |

## 推荐做法

1. **快速部署时**：先安装 nano（只需一条命令）
   ```bash
   sudo apt install nano -y  # Ubuntu/Debian
   # 或
   sudo yum install nano -y  # CentOS/RHEL
   ```

2. **无法安装软件时**：学习使用 vi/vim（系统通常自带）

3. **复杂配置文件**：在本地编辑后上传到服务器

## 常见问题

### Q: 在 vi 中不小心按了键，文件变得很奇怪怎么办？

A: 按 `Esc` 键，然后输入 `:q!` 不保存退出，重新打开文件。

### Q: 如何快速查找和替换文本？

A: 在 vi/vim 中：
- 查找：按 `/` 然后输入关键词，按 `Enter`
- 替换：按 `Esc`，输入 `:%s/旧文本/新文本/g`，按 `Enter`
  - `:%s` = 全文替换
  - `g` = 全局（每行所有匹配）

### Q: nano 和 vi 哪个更好？

A: 
- **nano**：更适合初学者，操作简单直观
- **vi/vim**：功能更强大，但需要学习基本操作

对于部署任务，推荐先用 nano，如果系统没有就临时学一下 vi 的基本操作（只需要知道 i、Esc、:wq 就够了）。

---

**提示**：如果遇到编辑器问题，也可以查看项目的部署文档中的具体步骤，那里已经标注了编辑器替代方案。




